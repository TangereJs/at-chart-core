<link rel="import" href="../tangere/tangere.html">
<link rel="import" href="../at-theme/at-theme.html">
<script src="../at-chart-core/lib/dist_browser.chart.bundle.js"></script>
<dom-module id="at-chart-core">
  <style>
    :host {
      position: relative;
      box-sizing: border-box;
      display: block;
      width: 100%;
    }
  </style>
  <template>
    <div style="border:4px solid transparent;">
      <canvas id="chart">

      </canvas>
    </div>
    <div id="dataContent" style="display:none">
      <content></content>
    </div>
  </template>
</dom-module>
<script>
  Polymer({
    is: 'at-chart-core',
    properties: {
      model: {
        type: Object,
        xtypelist: 'json'
      },
    },
    $meta: [{
      type: "element",
      xtype: "at-chart-core",
      title: "Charts",
      icon: "now:chart"
    }],

    observers: [
      'modelChanged(model)'
    ],

    modelChanged: function(model) {
      this.model = model;
    },

    ready: function() {

      var self = this;
      
      // var definition = {
      //             configuration: {
      //               data: {
      //                 labels: ['UK', 'USA', 'Germany'],
      //                 datasets: [
      //                   {
      //                     label: '2018',
      //                     data: [1354, 3434, 2456]
      //                   },
      //                   {
      //                     label: '2019',
      //                     data: [1245, 3646, 2234]
      //                   }
      //                 ]
      //               },
      //               options: {
      //                 title: {
      //                   display: true,
      //                   text: 'Order Volume'
      //                 }
      //               }
      //             },
      //             template: 'bar'
      //           };

      var definition = self.model;
      var chart = this.$.chart;

      createChart(chart, definition);

    },
  });
</script>
</polymer-element>
