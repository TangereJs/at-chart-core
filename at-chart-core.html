<link rel="import" href="../tangere/tangere.html">
<link rel="import" href="../at-theme/at-theme.html">
<script src="../at-chart-core/lib/dist_browser.chart.bundle.js"></script>
<dom-module id="at-chart-core">
  <style>
    :host {
      position: relative;
      box-sizing: border-box;
      display: block;
      width: 100%;
    }
  </style>
  <template>
    <div style="border:4px solid transparent;">
      <canvas id="chart">

      </canvas>
    </div>
    <div id="dataContent" style="display:none">
      <content></content>
    </div>
  </template>
</dom-module>
<script>
  Polymer({
    is: 'at-chart-core',
    properties: {
      model: {
        type: Object,
        xtype: "code",
        mode: "json",
        xgridcols: '12'
      },
    },
    $meta: [{
      type: "element",
      xtype: "at-chart-core",
      title: "Charts",
      icon: "now:chart"
    }],

    observers: [
      'modelChanged(model)'
    ],

    modelChanged: function(model) {

      var definition;

      if (Object.prototype.toString.call(model) === "[object String]") {
        definition = JSON.parse(model);
      }

      if (Object.prototype.toString.call(model) !== "[object String]") {
        definition = model;
      }


      
      this.initialize(definition);
    },

    initialize: function(definition) {
      var self = this;
      var def = definition;
      var canvas = self.$.chart;

      
      createChart(canvas, def);
    },

    ready: function() {

    },
  });
</script>
</polymer-element>
